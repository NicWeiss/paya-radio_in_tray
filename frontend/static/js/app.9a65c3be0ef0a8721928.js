webpackJsonp([1],{NHnr:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("7+uW"),a=r("NYxO"),s=(r("m3Wc"),{render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]}),o=r("VU/8")({name:"App"},s,!1,null,null,null).exports,c=r("/ocq"),i=r("Xxa5"),u=r.n(i),l=r("exGp"),p=r.n(l),d=r("//Fk"),v=r.n(d),f=r("Gu7T"),h=r.n(f),m={setSession:function(e){localStorage.setItem("session",e)},getSession:function(){return localStorage.getItem("session")},isAuthenticated:function(){return!!localStorage.getItem("session")},invalidateSession:function(){localStorage.setItem("session","")}},g=r("VU/8")(m,null,!1,null,null,null).exports,k={get:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.doRequest.apply(this,["get"].concat(h()(t)))},put:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.doRequest.apply(this,["put"].concat(h()(t)))},post:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.doRequest.apply(this,["post"].concat(h()(t)))},delete:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.doRequest.apply(this,["delete"].concat(h()(t)))},doRequest:function(e,t){var r={method:e,url:"http://127.0.0.1:7778/"+t,headers:{"Content-Type":"application/json; charset=UTF-8"},data:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,json:!0};return g.isAuthenticated()&&(r.headers.session=g.getSession()),axios.defaults.headers.post["Access-Control-Allow-Origin"]="*",axios.defaults.headers.post["Access-Control-Allow-Headers"]="*",new v.a(function(e,t){axios(r).then(function(t){e(t.data)}).catch(function(e){"TOKEN EXPIRED"===e.data&&(console.log("asdas"),g.invalidateSession(),window.location.replace("/")),t(e)})}.bind(this))}},b=r("VU/8")(k,null,!1,null,null,null).exports,x={name:"Login",data:function(){return{login:"",password:""}},methods:{check:function(){var e=this;return p()(u.a.mark(function t(){var r;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=null,t.prev=1,t.next=4,b.get("?get=client");case 4:r=t.sent,g.setSession(r.get.token),t.next=13;break;case 8:return t.prev=8,t.t0=t.catch(1),console.log("error: ",t.t0),g.invalidateSession(),t.abrupt("return");case 13:console.log(r),e.$router.push("/");case 15:case"end":return t.stop()}},t,e,[[1,8]])}))()},logIn:function(){var e=this;return p()(u.a.mark(function t(){var r;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=null,t.prev=1,t.next=4,b.get("?action=auth&user="+e.login+"&password="+e.password);case 4:r=t.sent,g.setSession(r.action.token),t.next=13;break;case 8:return t.prev=8,t.t0=t.catch(1),console.log("error: ",t.t0),g.invalidateSession(),t.abrupt("return");case 13:console.log(r),e.$router.push("/");case 15:case"end":return t.stop()}},t,e,[[1,8]])}))()}},created:function(){this.check()}},y={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container"},[r("form",{staticClass:"login-form"},[r("div",{staticClass:"form-group mb-3"},[r("label",{attrs:{for:"exampleInputEmail1"}},[e._v("Email address")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.login,expression:"login"}],staticClass:"form-control",attrs:{type:"email",id:"exampleInputEmail1","aria-describedby":"emailHelp",placeholder:"Enter email"},domProps:{value:e.login},on:{input:function(t){t.target.composing||(e.login=t.target.value)}}}),e._v(" "),r("small",{staticClass:"form-text text-muted",attrs:{id:"emailHelp"}},[e._v("We'll never share your email with anyone else.")])]),e._v(" "),r("div",{staticClass:"form-group mb-4"},[r("label",{attrs:{for:"exampleInputPassword1"}},[e._v("Password")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"form-control",attrs:{type:"password",id:"exampleInputPassword1",placeholder:"Password"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})]),e._v(" "),r("button",{staticClass:"btn btn-primary",attrs:{type:"submit"},on:{click:function(t){return t.preventDefault(),e.logIn(t)}}},[e._v("\n      Submit\n    ")])])])},staticRenderFns:[]},_=r("VU/8")(x,y,!1,null,null,null).exports,w={name:"Player",components:{},methods:{check:function(){var e=this;return p()(u.a.mark(function t(){var r;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=null,t.prev=1,t.next=4,b.get("?get=client");case 4:r=t.sent,g.setSession(r.get.token),t.next=14;break;case 8:return t.prev=8,t.t0=t.catch(1),console.log("error: ",t.t0),g.invalidateSession(),e.$router.push("/login"),t.abrupt("return");case 14:console.log(r);case 15:case"end":return t.stop()}},t,e,[[1,8]])}))()},dislike:function(){var e=this;return p()(u.a.mark(function t(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.get("?action=dislike");case 3:e.next=8;break;case 5:return e.prev=5,e.t0=e.catch(0),e.abrupt("return");case 8:case"end":return e.stop()}},t,e,[[0,5]])}))()},pause:function(){var e=this;return p()(u.a.mark(function t(){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,b.get("?action=pause");case 3:t.next=8;break;case 5:return t.prev=5,t.t0=t.catch(0),t.abrupt("return");case 8:"Paused"==e.state?e.state="Playing":e.state="Paused";case 9:case"end":return t.stop()}},t,e,[[0,5]])}))()},play:function(){var e=this;return p()(u.a.mark(function t(){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,b.get("?action=play");case 3:t.next=8;break;case 5:return t.prev=5,t.t0=t.catch(0),t.abrupt("return");case 8:e.get_track();case 9:case"end":return t.stop()}},t,e,[[0,5]])}))()},like:function(){var e=this;return p()(u.a.mark(function t(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.get("?action=like");case 3:e.next=8;break;case 5:return e.prev=5,e.t0=e.catch(0),e.abrupt("return");case 8:case"end":return e.stop()}},t,e,[[0,5]])}))()},next:function(){var e=this;return p()(u.a.mark(function t(){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,b.get("?action=next");case 3:t.next=8;break;case 5:return t.prev=5,t.t0=t.catch(0),t.abrupt("return");case 8:e.playPercent=0,e.get_track();case 10:case"end":return t.stop()}},t,e,[[0,5]])}))()},get_track:function(){var e=this;return p()(u.a.mark(function t(){var r;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=null,t.prev=1,t.next=4,b.get("?get=track");case 4:r=t.sent,t.next=10;break;case 7:return t.prev=7,t.t0=t.catch(1),t.abrupt("return");case 10:e.track=r.get.track;case 11:case"end":return t.stop()}},t,e,[[1,7]])}))()},get_player:function(){var e=this;return p()(u.a.mark(function t(){var r;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=null,t.prev=1,t.next=4,b.get("?get=player_state");case 4:r=t.sent,t.next=10;break;case 7:return t.prev=7,t.t0=t.catch(1),t.abrupt("return");case 10:e.player=r.get.player_state,e.duration=e.player.track_duration,e.playInkrement=.5/(e.duration/100*.001),e.playPercent=Number((e.player.current_time*(100/e.player.track_duration)).toFixed(2)),e.state=e.player.state;case 15:case"end":return t.stop()}},t,e,[[1,7]])}))()},inkrement_progressbar:function(){"Playing"==this.state&&(this.playPercent=Number((Number(this.playPercent)+Number(this.playInkrement)).toFixed(2)))}},created:function(){var e=this;this.playPercent=0,this.state="",this.check(),this.get_track(),this.get_player();setInterval(function(){return e.get_player()},1e4),setInterval(function(){return e.inkrement_progressbar()},500)},data:function(){return{track:this.track,playPercent:this.playPercent}}},P={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e._v("\n  Player here"),r("br"),r("br"),e._v(" "),e.track?r("div",[e._v("\n    Title: "+e._s(e.track.title)),r("br"),e._v(" "),r("progress",{staticClass:"progress",attrs:{id:"file",max:"100"},domProps:{value:e.playPercent}})]):e._e(),e._v(" "),r("button",{staticClass:"btn btn-primary",on:{click:e.dislike}},[e._v("Dislike")]),e._v(" "),r("button",{staticClass:"btn btn-primary",on:{click:e.pause}},[e._v("Pause")]),e._v(" "),r("button",{staticClass:"btn btn-primary",on:{click:e.play}},[e._v("Play")]),e._v(" "),r("button",{staticClass:"btn btn-primary",on:{click:e.like}},[e._v("Like")]),e._v(" "),r("button",{staticClass:"btn btn-primary",on:{click:e.next}},[e._v("Next")])])},staticRenderFns:[]};var A=r("VU/8")(w,P,!1,function(e){r("zAjU")},"data-v-062a4ef2",null).exports,C={render:function(){var e=this.$createElement;return(this._self._c||e)("div",[this._v("404: Страница не найдена")])},staticRenderFns:[]};r("VU/8")({data:function(){return{}}},C,!1,null,null,null).exports;n.a.use(c.a);var S=new c.a({mode:"history",routes:[{path:"/login",name:"Login",component:_,meta:{onlyGuest:!0}},{path:"/",name:"Player",component:A,meta:{requiresAuth:!0}},{path:"*",redirect:"/login"}]});S.beforeEach(function(e,t,r){if(e.matched.some(function(e){return e.meta.onlyGuest})&&g.isAuthenticated())r("/");else{if(e.matched.some(function(e){return e.meta.requiresAuth})){if(g.isAuthenticated())return void r();r("/login")}r()}});var I=S;n.a.config.productionTip=!1,n.a.use(a.a);var E=new a.a.Store({state:{test:0},mutations:{setTest:function(e,t){e.test=t}},getters:{getTest:function(e){return e.test}}});new n.a({el:"#app",router:I,store:E,components:{App:o},template:"<App/>"})},m3Wc:function(e,t){},zAjU:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.9a65c3be0ef0a8721928.js.map