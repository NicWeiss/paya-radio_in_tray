webpackJsonp([1],{NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("7+uW"),a=n("NYxO"),s=(n("m3Wc"),{render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]}),o=n("VU/8")({name:"App"},s,!1,null,null,null).exports,c=n("/ocq"),i=n("Xxa5"),u=n.n(i),l=n("exGp"),p=n.n(l),d=n("//Fk"),v=n.n(d),f=n("Gu7T"),h=n.n(f),m={setSession:function(t){localStorage.setItem("session",t)},getSession:function(){return localStorage.getItem("session")},isAuthenticated:function(){return!!localStorage.getItem("session")},invalidateSession:function(){localStorage.setItem("session","")}},g=n("VU/8")(m,null,!1,null,null,null).exports,k={get:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.doRequest.apply(this,["get"].concat(h()(e)))},put:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.doRequest.apply(this,["put"].concat(h()(e)))},post:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.doRequest.apply(this,["post"].concat(h()(e)))},delete:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.doRequest.apply(this,["delete"].concat(h()(e)))},doRequest:function(t,e){var n={method:t,url:"http://127.0.0.1:7778/"+e,headers:{"Content-Type":"application/json; charset=UTF-8"},data:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,json:!0};return g.isAuthenticated()&&(n.headers.session=g.getSession()),axios.defaults.headers.post["Access-Control-Allow-Origin"]="*",axios.defaults.headers.post["Access-Control-Allow-Headers"]="*",new v.a(function(t,e){axios(n).then(function(e){t(e.data)}).catch(function(t){"TOKEN EXPIRED"===t.data&&(console.log("asdas"),g.invalidateSession(),window.location.replace("/")),e(t)})}.bind(this))}},x=n("VU/8")(k,null,!1,null,null,null).exports,b={name:"Login",data:function(){return{login:"",password:""}},methods:{check:function(){var t=this;return p()(u.a.mark(function e(){var n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,x.get("?get=client");case 4:n=e.sent,g.setSession(n.get.token),e.next=13;break;case 8:return e.prev=8,e.t0=e.catch(1),console.log("error: ",e.t0),g.invalidateSession(),e.abrupt("return");case 13:console.log(n),t.$router.push("/");case 15:case"end":return e.stop()}},e,t,[[1,8]])}))()},logIn:function(){var t=this;return p()(u.a.mark(function e(){var n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,x.get("?action=auth&user="+t.login+"&password="+t.password);case 4:n=e.sent,g.setSession(n.action.token),e.next=13;break;case 8:return e.prev=8,e.t0=e.catch(1),console.log("error: ",e.t0),g.invalidateSession(),e.abrupt("return");case 13:console.log(n),t.$router.push("/");case 15:case"end":return e.stop()}},e,t,[[1,8]])}))()}},created:function(){this.check()}},y={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("form",{staticClass:"login-form"},[n("div",{staticClass:"form-group mb-3"},[n("label",{attrs:{for:"exampleInputEmail1"}},[t._v("Email address")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.login,expression:"login"}],staticClass:"form-control",attrs:{type:"email",id:"exampleInputEmail1","aria-describedby":"emailHelp",placeholder:"Enter email"},domProps:{value:t.login},on:{input:function(e){e.target.composing||(t.login=e.target.value)}}}),t._v(" "),n("small",{staticClass:"form-text text-muted",attrs:{id:"emailHelp"}},[t._v("We'll never share your email with anyone else.")])]),t._v(" "),n("div",{staticClass:"form-group mb-4"},[n("label",{attrs:{for:"exampleInputPassword1"}},[t._v("Password")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",attrs:{type:"password",id:"exampleInputPassword1",placeholder:"Password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),t._v(" "),n("button",{staticClass:"btn btn-primary",attrs:{type:"submit"},on:{click:function(e){return e.preventDefault(),t.logIn(e)}}},[t._v("\n      Submit\n    ")])])])},staticRenderFns:[]},_=n("VU/8")(b,y,!1,null,null,null).exports,w={name:"Player",components:{},methods:{check:function(){var t=this;return p()(u.a.mark(function e(){var n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,x.get("?get=client");case 4:n=e.sent,g.setSession(n.get.token),e.next=14;break;case 8:return e.prev=8,e.t0=e.catch(1),console.log("error: ",e.t0),g.invalidateSession(),t.$router.push("/login"),e.abrupt("return");case 14:console.log(n);case 15:case"end":return e.stop()}},e,t,[[1,8]])}))()},dislike:function(){var t=this;return p()(u.a.mark(function e(){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,x.get("?action=dislike");case 3:t.next=8;break;case 5:return t.prev=5,t.t0=t.catch(0),t.abrupt("return");case 8:case"end":return t.stop()}},e,t,[[0,5]])}))()},pause:function(){var t=this;return p()(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.get("?action=pause");case 3:e.next=8;break;case 5:return e.prev=5,e.t0=e.catch(0),e.abrupt("return");case 8:"Paused"==t.state?t.state="Playing":t.state="Paused";case 9:case"end":return e.stop()}},e,t,[[0,5]])}))()},play:function(){var t=this;return p()(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.get("?action=play");case 3:e.next=8;break;case 5:return e.prev=5,e.t0=e.catch(0),e.abrupt("return");case 8:t.get_track();case 9:case"end":return e.stop()}},e,t,[[0,5]])}))()},like:function(){var t=this;return p()(u.a.mark(function e(){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,x.get("?action=like");case 3:t.next=8;break;case 5:return t.prev=5,t.t0=t.catch(0),t.abrupt("return");case 8:case"end":return t.stop()}},e,t,[[0,5]])}))()},next:function(){var t=this;return p()(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.get("?action=next");case 3:e.next=8;break;case 5:return e.prev=5,e.t0=e.catch(0),e.abrupt("return");case 8:t.playPercent=0,t.get_track();case 10:case"end":return e.stop()}},e,t,[[0,5]])}))()},get_track:function(){var t=this;return p()(u.a.mark(function e(){var n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,x.get("?get=track");case 4:n=e.sent,e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(1),e.abrupt("return");case 10:t.track=n.get.track;case 11:case"end":return e.stop()}},e,t,[[1,7]])}))()},get_player:function(){var t=this;return p()(u.a.mark(function e(){var n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,x.get("?get=player_state");case 4:n=e.sent,e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(1),e.abrupt("return");case 10:t.player=n.get.player_state,t.duration=t.player.track_duration,t.playInkrement=.5/(t.duration/100*.001),t.playPercent=Number((t.player.current_time*(100/t.player.track_duration)).toFixed(2)),t.state=t.player.state;case 15:case"end":return e.stop()}},e,t,[[1,7]])}))()},inkrement_progressbar:function(){"Playing"==this.state&&(this.playPercent=Number((Number(this.playPercent)+Number(this.playInkrement)).toFixed(2)))}},created:function(){var t=this;this.playPercent=0,this.state="",this.check(),this.get_track(),this.get_player();setInterval(function(){return t.get_player()},1e4),setInterval(function(){return t.inkrement_progressbar()},500)},data:function(){return{track:this.track,playPercent:this.playPercent}}},P={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._v("\n  Player here"),n("br"),n("br"),t._v(" "),t.track?n("div",[t._v("\n    Title: "+t._s(t.track.title)),n("br"),t._v(" "),n("img",{attrs:{src:!function(){var t=new Error('Cannot find module "@/assets/covers"');throw t.code="MODULE_NOT_FOUND",t}()}}),t._v(" "),n("progress",{staticClass:"progress",attrs:{id:"file",max:"100"},domProps:{value:t.playPercent}})]):t._e(),t._v(" "),n("button",{staticClass:"btn btn-primary",on:{click:t.dislike}},[t._v("Dislike")]),t._v(" "),n("button",{staticClass:"btn btn-primary",on:{click:t.pause}},[t._v("Pause")]),t._v(" "),n("button",{staticClass:"btn btn-primary",on:{click:t.play}},[t._v("Play")]),t._v(" "),n("button",{staticClass:"btn btn-primary",on:{click:t.like}},[t._v("Like")]),t._v(" "),n("button",{staticClass:"btn btn-primary",on:{click:t.next}},[t._v("Next")])])},staticRenderFns:[]};var C=n("VU/8")(w,P,!1,function(t){n("enYY")},"data-v-1423a608",null).exports,A={render:function(){var t=this.$createElement;return(this._self._c||t)("div",[this._v("404: Страница не найдена")])},staticRenderFns:[]};n("VU/8")({data:function(){return{}}},A,!1,null,null,null).exports;r.a.use(c.a);var S=new c.a({mode:"history",routes:[{path:"/login",name:"Login",component:_,meta:{onlyGuest:!0}},{path:"/",name:"Player",component:C,meta:{requiresAuth:!0}},{path:"*",redirect:"/login"}]});S.beforeEach(function(t,e,n){if(t.matched.some(function(t){return t.meta.onlyGuest})&&g.isAuthenticated())n("/");else{if(t.matched.some(function(t){return t.meta.requiresAuth})){if(g.isAuthenticated())return void n();n("/login")}n()}});var E=S;r.a.config.productionTip=!1,r.a.use(a.a);var I=new a.a.Store({state:{test:0},mutations:{setTest:function(t,e){t.test=e}},getters:{getTest:function(t){return t.test}}});new r.a({el:"#app",router:E,store:I,components:{App:o},template:"<App/>"})},enYY:function(t,e){},m3Wc:function(t,e){},nxt0:function(t,e){function n(t){throw new Error("Cannot find module '"+t+"'.")}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="nxt0"}},["NHnr"]);
//# sourceMappingURL=app.feccdbc66b7a5b7d2631.js.map